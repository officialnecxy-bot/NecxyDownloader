<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <title>NECXY DOWNLOADER - Premium</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        neon: {
                            red: '#FF003C', 
                            dark: '#030303',
                            cyan: '#00f2ea',
                            pink: '#ff0050'
                        },
                        ig: {
                            start: '#833AB4',
                            mid: '#FD1D1D',
                            end: '#FCB045'
                        }
                    },
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        mono: ['Space Grotesk', 'monospace'],
                    },
                    animation: {
                        'grid-flow': 'gridFlow 20s linear infinite',
                        'pulse-glow': 'pulseGlow 3s infinite',
                        'modal-in': 'modalIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'spin-slow': 'spin 10s linear infinite',
                        'spin-reverse': 'spin 15s linear infinite reverse',
                        'scan': 'scanLine 3s ease-in-out infinite',
                    },
                    keyframes: {
                        gridFlow: {
                            '0%': { backgroundPosition: '0 0' },
                            '100%': { backgroundPosition: '50px 50px' }
                        },
                        pulseGlow: {
                            '0%, 100%': { opacity: '0.5' },
                            '50%': { opacity: '1' }
                        },
                        modalIn: {
                            '0%': { opacity: '0', transform: 'scale(0.95) translateY(10px)' },
                            '100%': { opacity: '1', transform: 'scale(1) translateY(0)' }
                        },
                        scanLine: {
                            '0%, 100%': { top: '0%', opacity: 0 },
                            '50%': { top: '100%', opacity: 1 }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #030303;
            color: white;
            min-height: 100dvh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            cursor: default;
            transition: background-color 0.8s ease;
        }

        /* --- DYNAMIC BACKGROUNDS --- */
        .bg-cyber {
            position: fixed;
            inset: 0;
            z-index: -1;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: grid-flow 20s linear infinite;
        }
        
        .bg-glow {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 120vw; height: 120vh;
            z-index: -1;
            pointer-events: none;
            transition: background 1s ease-in-out;
        }

        /* YouTube Theme (Default) */
        body.theme-yt .bg-glow { background: radial-gradient(circle at center, rgba(255, 0, 60, 0.12) 0%, transparent 70%); }

        /* Instagram Theme */
        body.theme-ig .bg-glow { background: radial-gradient(circle at center, rgba(131, 58, 180, 0.15) 0%, rgba(253, 29, 29, 0.1) 40%, transparent 70%); }

        /* TikTok Theme */
        body.theme-tt .bg-glow { background: radial-gradient(circle at center, rgba(0, 242, 234, 0.15) 0%, rgba(255, 0, 80, 0.1) 50%, transparent 70%); }


        /* --- TAP ANIMATION --- */
        .cyber-tap {
            position: absolute;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
        }
        
        .cyber-tap .burst {
            width: 40px; height: 40px;
            border-radius: 50%;
            border: 2px solid;
            box-shadow: 0 0 20px;
            animation: burst 0.5s cubic-bezier(0.1, 0.8, 0.2, 1) forwards;
            opacity: 0;
        }

        /* Colors for Tap */
        body.theme-yt .cyber-tap .burst { border-color: #FF003C; box-shadow: 0 0 20px #FF003C; }
        body.theme-ig .cyber-tap .burst { border-color: #d62976; box-shadow: 0 0 20px #d62976; }
        body.theme-tt .cyber-tap .burst { border-color: #00f2ea; box-shadow: 0 0 20px #00f2ea; }

        @keyframes burst {
            0% { transform: scale(0); opacity: 1; border-width: 4px; }
            100% { transform: scale(3); opacity: 0; border-width: 0px; }
        }

        /* Cyber Card */
        .cyber-card {
            background: rgba(10, 10, 10, 0.6);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
            transition: all 0.5s ease;
        }
        
        /* Dynamic Border Colors */
        body.theme-yt .cyber-card:hover { border-color: rgba(255, 0, 60, 0.3); }
        body.theme-ig .cyber-card:hover { border-color: rgba(214, 41, 118, 0.3); }
        body.theme-tt .cyber-card:hover { border-color: rgba(0, 242, 234, 0.3); }


        /* --- OPTIMIZED PROFILE BADGE --- */
        .profile-badge {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.4s ease;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        
        body.theme-yt .profile-badge:hover { border-color: #FF003C; background: rgba(20, 0, 5, 0.6); box-shadow: 0 0 25px rgba(255, 0, 60, 0.2); }
        body.theme-ig .profile-badge:hover { border-color: #d62976; background: rgba(20, 5, 20, 0.6); box-shadow: 0 0 25px rgba(214, 41, 118, 0.2); }
        body.theme-tt .profile-badge:hover { border-color: #00f2ea; background: rgba(0, 20, 20, 0.6); box-shadow: 0 0 25px rgba(0, 242, 234, 0.2); }

        /* Profile Rings */
        .ring-yt { border-color: rgba(255, 255, 255, 0.2); }
        body.theme-yt .profile-badge:hover .ring-yt { border-color: rgba(255, 0, 60, 0.6); }
        .ring-ig { border-color: rgba(255, 255, 255, 0.2); }
        body.theme-ig .profile-badge:hover .ring-ig { border-color: rgba(214, 41, 118, 0.6); }
        .ring-tt { border-color: rgba(255, 255, 255, 0.2); }
        body.theme-tt .profile-badge:hover .ring-tt { border-color: rgba(0, 242, 234, 0.6); }


        .scan-line {
            position: absolute;
            width: 100%; height: 2px;
            animation: scan 2s linear infinite;
        }
        body.theme-yt .scan-line { background: #FF003C; box-shadow: 0 0 5px #FF003C; }
        body.theme-ig .scan-line { background: #d62976; box-shadow: 0 0 5px #d62976; }
        body.theme-tt .scan-line { background: #00f2ea; box-shadow: 0 0 5px #00f2ea; }

        /* Input Field */
        .cyber-input {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        body.theme-yt .cyber-input:focus-within { border-color: #FF003C; box-shadow: 0 0 20px rgba(255, 0, 60, 0.15); }
        body.theme-ig .cyber-input:focus-within { border-color: #d62976; box-shadow: 0 0 20px rgba(214, 41, 118, 0.15); }
        body.theme-tt .cyber-input:focus-within { border-color: #00f2ea; box-shadow: 0 0 20px rgba(0, 242, 234, 0.15); }

        /* Main Button */
        .btn-yt { background: linear-gradient(135deg, #FF003C 0%, #aa0022 100%); box-shadow: 0 10px 30px -10px rgba(255, 0, 60, 0.4); }
        .btn-ig { background: linear-gradient(135deg, #833AB4 0%, #FD1D1D 50%, #FCB045 100%); box-shadow: 0 10px 30px -10px rgba(214, 41, 118, 0.4); }
        .btn-tt { background: linear-gradient(135deg, #00f2ea 0%, #000000 50%, #ff0050 100%); box-shadow: 0 10px 30px -10px rgba(0, 242, 234, 0.4); }
        
        .btn-cyber {
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }
        .btn-cyber:hover { transform: translateY(-2px); filter: brightness(1.1); }

        /* Social Buttons */
        .social-btn {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.2s;
        }
        .social-btn:hover {
            background: rgba(255,255,255,0.08);
            border-color: #FF003C;
            transform: translateY(-2px);
        }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #FF003C; }
    </style>
</head>
<body class="theme-yt p-4 md:p-6 pb-20 transition-colors duration-700">

    <div class="bg-cyber"></div>
    <div class="bg-glow"></div>

    <header class="w-full max-w-6xl mx-auto flex justify-between items-center z-50 mb-8 pt-4">
        <div class="flex flex-col justify-center select-none">
            <div class="flex items-baseline gap-2">
                <h1 class="text-2xl md:text-3xl font-black tracking-tight text-white">
                    NECXY
                    <span id="logo-suffix" class="text-transparent bg-clip-text bg-gradient-to-r from-neon-red to-red-600 drop-shadow-[0_0_15px_rgba(255,0,60,0.4)]">DOWNLOADER</span>
                </h1>
            </div>
            <div class="flex items-center gap-2 mt-1">
                <div id="logo-line" class="h-[2px] w-6 bg-neon-red/70 rounded-full transition-colors duration-500"></div>
                <p class="text-[10px] text-gray-400 font-mono tracking-[0.2em] uppercase font-bold">Premium Engine V4.7</p>
            </div>
        </div>

        <div onclick="openProfile()" class="profile-badge flex items-center gap-3.5 pl-4 pr-1.5 py-1.5 rounded-full cursor-pointer group select-none relative overflow-visible">
            
            <div class="text-right mr-1 hidden sm:block z-10">
                <p class="text-[9px] text-gray-400 font-mono uppercase tracking-wider group-hover:text-white transition-colors font-bold">Authenticated</p>
                <div class="flex items-center justify-end gap-1.5">
                    <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_5px_#22c55e]"></span>
                    <p class="text-xs font-bold text-white leading-none">Necxy Profile</p>
                </div>
            </div>
            
            <span class="text-[10px] font-bold text-gray-400 sm:hidden tracking-wider font-mono group-hover:text-white transition-colors z-10">PROFILE</span>
            
            <div class="relative w-10 h-10 flex items-center justify-center z-10">
                <div class="absolute inset-0 rounded-full border border-dashed ring-yt ring-ig ring-tt animate-spin-slow transition-colors"></div>
                <div class="absolute inset-[3px] rounded-full border border-dotted ring-yt ring-ig ring-tt animate-spin-reverse transition-colors"></div>

                <div class="w-8 h-8 rounded-full relative overflow-hidden bg-black ring-1 ring-white/10">
                    <img src="https://i.ibb.co/FbqyBmJt/1764268446451.png" class="w-full h-full object-cover">
                    <div class="scan-line"></div>
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow flex flex-col items-center justify-center relative z-10 w-full max-w-2xl mx-auto">
        
        <div class="text-center mb-8 space-y-4 animate-modal-in">
            <div id="status-pill" class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-neon-red/30 bg-neon-red/5 backdrop-blur-md text-[10px] text-neon-red font-mono font-bold tracking-widest shadow-[0_0_15px_rgba(255,0,60,0.15)] transition-all duration-500">
                <span class="relative flex h-2 w-2">
                  <span id="status-dot-ping" class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75 transition-colors duration-500"></span>
                  <span id="status-dot" class="relative inline-flex rounded-full h-2 w-2 bg-neon-red transition-colors duration-500"></span>
                </span>
                SYSTEM ONLINE
            </div>
            
            <h2 class="text-4xl md:text-6xl font-black uppercase tracking-tight text-white drop-shadow-2xl">
                Universal <span id="hero-gradient" class="text-transparent bg-clip-text bg-gradient-to-r from-neon-red to-red-600 transition-all duration-700">Gateway</span>
            </h2>
            
            <p class="text-gray-400 text-sm md:text-base max-w-lg mx-auto font-light leading-relaxed">
                Extract high-fidelity media from <span class="text-white font-medium">YT</span>, <span class="text-white font-medium">Insta</span> & <span class="text-white font-medium">TikTok</span> instantly.
            </p>
        </div>

        <div class="w-full cyber-card rounded-3xl p-6 md:p-8 relative overflow-hidden">
            
            <div class="flex justify-between md:justify-center gap-2 md:gap-8 mb-8 border-b border-white/5 pb-2 overflow-x-auto">
                <button onclick="switchTab('yt')" id="btn-yt" class="text-white pb-3 border-b-2 border-neon-red font-bold text-xs md:text-sm tracking-widest flex items-center gap-2 transition-all opacity-100 shadow-[0_10px_20px_-10px_rgba(255,0,60,0.5)] shrink-0">
                    <i class="fa-brands fa-youtube"></i> YOUTUBE
                </button>
                <button onclick="switchTab('ig')" id="btn-ig" class="text-gray-500 pb-3 border-b-2 border-transparent hover:text-white font-bold text-xs md:text-sm tracking-widest flex items-center gap-2 transition-all opacity-60 shrink-0">
                    <i class="fa-brands fa-instagram"></i> INSTAGRAM
                </button>
                <button onclick="switchTab('tt')" id="btn-tt" class="text-gray-500 pb-3 border-b-2 border-transparent hover:text-white font-bold text-xs md:text-sm tracking-widest flex items-center gap-2 transition-all opacity-60 shrink-0">
                    <i class="fa-brands fa-tiktok"></i> TIKTOK
                </button>
            </div>

            <div class="space-y-6">
                <div class="cyber-input rounded-2xl flex items-center p-1 pl-5">
                    <i class="fa-solid fa-link text-gray-500 text-sm mr-3"></i>
                    <input type="text" id="urlInput" class="w-full bg-transparent border-none text-white placeholder-gray-600 outline-none font-mono text-sm h-12" placeholder="Paste Link_Here //">
                    <button onclick="pasteLink()" class="h-10 px-4 rounded-xl bg-white/5 hover:bg-white/10 text-[10px] font-bold text-gray-300 hover:text-white uppercase transition-colors border border-white/5 tracking-wider">
                        PASTE
                    </button>
                </div>

                <button onclick="processLink()" id="generateBtn" class="w-full h-14 btn-cyber btn-yt rounded-2xl font-bold uppercase tracking-[0.2em] flex items-center justify-center gap-3 text-sm text-white group transition-all duration-500">
                    <span>Initialize Download</span> 
                    <i class="fa-solid fa-bolt group-hover:animate-pulse"></i>
                </button>
            </div>

            <div id="loader" class="hidden mt-8 text-center">
                <div class="w-full h-1 bg-gray-900 rounded-full overflow-hidden mb-2 relative">
                    <div id="loader-line" class="absolute top-0 left-0 h-full w-1/2 bg-neon-red animate-[gridFlow_1s_linear_infinite]" style="animation: moveLine 1s linear infinite;"></div>
                </div>
                <p class="text-[10px] font-mono text-gray-400 animate-pulse tracking-widest">ANALYZING METADATA...</p>
            </div>

            <div id="resultCard" class="hidden mt-8 pt-6 border-t border-dashed border-white/10 animate-modal-in">
                <div class="flex flex-col sm:flex-row gap-6">
                    <div class="w-full sm:w-36 h-36 sm:h-24 shrink-0 relative rounded-xl overflow-hidden border border-white/10 group shadow-lg">
                        <img id="thumb" class="w-full h-full object-cover bg-gray-900 transition-transform duration-500 group-hover:scale-110" src="">
                        <div class="absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-sm">
                            <i class="fa-solid fa-play text-white text-xl"></i>
                        </div>
                    </div>

                    <div class="flex-1 min-w-0 flex flex-col justify-center">
                        <div class="flex items-center gap-2 mb-2">
                            <span id="platformBadge" class="text-[9px] font-bold px-2 py-0.5 rounded bg-white/5 border border-white/10 text-gray-300 uppercase">YT</span>
                            <span class="text-[9px] text-green-500 font-mono tracking-wider flex items-center gap-1">
                                <span class="w-1 h-1 rounded-full bg-green-500"></span> READY
                            </span>
                        </div>
                        
                        <h3 id="videoTitle" class="text-sm font-bold text-white line-clamp-1 mb-1 leading-snug">Video Title Here</h3>
                        <p id="videoAuthor" class="text-xs text-gray-500 mb-4 font-mono flex items-center gap-1">
                            <i class="fa-regular fa-user"></i> <span class="opacity-80">Channel Name</span>
                        </p>
                        
                        <div id="downloadButtons" class="grid grid-cols-1 gap-2 max-h-40 overflow-y-auto pr-1 custom-scrollbar">
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-12 flex justify-center items-center gap-6 opacity-30 text-[10px] font-mono tracking-widest select-none">
            <span>SECURE</span>
            <span class="w-1 h-1 bg-white rounded-full"></span>
            <span>ENCRYPTED</span>
            <span class="w-1 h-1 bg-white rounded-full"></span>
            <span>NECXY CORP</span>
        </div>

    </main>

    <div id="profileModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity duration-300" onclick="closeProfile()"></div>
        
        <div class="relative w-full max-w-sm bg-[#090909] border border-[#222] rounded-3xl p-6 shadow-2xl animate-modal-in overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-neon-red via-purple-600 to-transparent"></div>
            <div class="absolute -top-10 -right-10 w-32 h-32 bg-neon-red/10 rounded-full blur-3xl pointer-events-none"></div>

            <button onclick="closeProfile()" class="absolute top-4 right-4 w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-gray-500 hover:text-white hover:bg-white/10 transition-all">
                <i class="fa-solid fa-xmark text-sm"></i>
            </button>

            <div class="flex flex-col items-center mb-8 relative z-10">
                <div class="w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-neon-red to-gray-900 mb-4 relative shadow-[0_0_30px_rgba(255,0,60,0.15)]">
                    <img src="https://i.ibb.co/TBKpTDvp/Picsart-25-11-24-02-57-46-326.jpg" class="w-full h-full rounded-full object-cover border-2 border-black bg-black">
                    <div class="absolute bottom-1 right-1 w-6 h-6 bg-black rounded-full flex items-center justify-center border border-white/20">
                         <i class="fa-solid fa-check text-[10px] text-blue-400"></i>
                    </div>
                </div>
                <h2 class="text-2xl font-bold text-white tracking-wide">NECXY</h2>
                <p class="text-xs text-transparent bg-clip-text bg-gradient-to-r from-gray-400 to-gray-600 font-mono mt-1 font-bold tracking-wider">FULL STACK DEVELOPER</p>
            </div>

            <div class="grid grid-cols-2 gap-3 mb-6 relative z-10">
                <a href="https://t.me/+88Yn76RScSdiNjFl" target="_blank" class="social-btn col-span-2 flex items-center justify-center gap-3 p-3.5 rounded-2xl text-white group">
                    <i class="fa-brands fa-telegram text-blue-400 text-xl group-hover:scale-110 transition-transform"></i>
                    <div>
                        <p class="text-xs font-bold leading-none">Telegram Channel</p>
                        <p class="text-[9px] text-gray-500 mt-0.5">Join Community</p>
                    </div>
                </a>

                <a href="https://www.instagram.com/imwilliambutcher?igsh=MTFuNHl6azYzeHZoag==" target="_blank" class="social-btn flex flex-col items-center justify-center gap-2 p-4 rounded-2xl text-white group">
                    <i class="fa-brands fa-instagram text-pink-500 text-2xl group-hover:scale-110 transition-transform"></i>
                    <span class="text-[10px] uppercase tracking-wider text-gray-400 group-hover:text-white font-bold">Instagram</span>
                </a>

                <a href="https://t.me/i_necxy" target="_blank" class="social-btn flex flex-col items-center justify-center gap-2 p-4 rounded-2xl text-white group">
                    <i class="fa-regular fa-paper-plane text-blue-300 text-2xl group-hover:scale-110 transition-transform"></i>
                    <span class="text-[10px] uppercase tracking-wider text-gray-400 group-hover:text-white font-bold">Contact</span>
                </a>

                <button onclick="showComingSoon()" class="social-btn p-3 rounded-2xl group"><i class="fa-brands fa-discord text-indigo-400 text-lg"></i></button>
                <button onclick="showComingSoon()" class="social-btn p-3 rounded-2xl group"><i class="fa-brands fa-reddit-alien text-orange-500 text-lg"></i></button>
                <button onclick="showComingSoon()" class="social-btn p-3 rounded-2xl group"><i class="fa-brands fa-x-twitter text-white text-lg"></i></button>
                <button onclick="showComingSoon()" class="social-btn p-3 rounded-2xl group"><i class="fa-brands fa-whatsapp text-green-500 text-lg"></i></button>
            </div>
            
            <div class="text-center">
                <p class="text-[9px] text-gray-700 font-mono">ID: NCX-8821-ALPHA // VERIFIED</p>
            </div>
        </div>
    </div>

    <div id="toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-[#111] border border-neon-red/30 text-white px-6 py-3 rounded-full transform translate-y-24 opacity-0 transition-all duration-500 cubic-bezier(0.175, 0.885, 0.32, 1.275) z-[200] flex items-center gap-3 shadow-[0_0_30px_rgba(255,0,60,0.2)] pointer-events-none">
        <div class="w-2 h-2 rounded-full bg-neon-red animate-pulse"></div>
        <span class="text-xs font-bold font-mono tracking-widest uppercase">Coming Soon</span>
    </div>

    <style>
        @keyframes moveLine { 0% { left: -50%; } 100% { left: 100%; } }
    </style>

    <script>
        // --- NEW ULTRA TAP ANIMATION LOGIC ---
        document.addEventListener('click', function(e) {
            const container = document.createElement('div');
            container.classList.add('cyber-tap');
            container.style.left = e.clientX + 'px';
            container.style.top = e.clientY + 'px';

            const burst = document.createElement('div');
            burst.classList.add('burst');
            container.appendChild(burst);
            document.body.appendChild(container);
            setTimeout(() => container.remove(), 800);
        });

        // --- TOAST NOTIFICATION LOGIC ---
        let toastTimeout;
        function showComingSoon() {
            const toast = document.getElementById('toast');
            clearTimeout(toastTimeout);
            toast.classList.remove('translate-y-24', 'opacity-0');
            toastTimeout = setTimeout(() => {
                toast.classList.add('translate-y-24', 'opacity-0');
            }, 2000);
        }

        // --- PROFILE MODAL LOGIC ---
        function openProfile() { document.getElementById('profileModal').classList.remove('hidden'); }
        function closeProfile() { document.getElementById('profileModal').classList.add('hidden'); }

        // --- DOWNLOADER LOGIC ---
        const RAPID_API_KEY = "7a77e5ee86msh0a58908122661d0p13bc09jsn5c76755fd90d";
        const YT_HOST = "youtube-media-downloader.p.rapidapi.com";
        const IG_HOST = "instagram-downloader-download-instagram-stories-videos4.p.rapidapi.com";
        const TT_HOST = "tiktok-video-no-watermark2.p.rapidapi.com";

        let currentPlatform = 'yt';

        function switchTab(platform) {
            currentPlatform = platform;
            const input = document.getElementById('urlInput');
            const btnYt = document.getElementById('btn-yt');
            const btnIg = document.getElementById('btn-ig');
            const btnTt = document.getElementById('btn-tt');
            const body = document.body;
            const logoSuffix = document.getElementById('logo-suffix');
            const logoLine = document.getElementById('logo-line');
            const statusPill = document.getElementById('status-pill');
            const statusDotPing = document.getElementById('status-dot-ping');
            const statusDot = document.getElementById('status-dot');
            const heroGradient = document.getElementById('hero-gradient');
            const generateBtn = document.getElementById('generateBtn');
            const loaderLine = document.getElementById('loader-line');

            // Reset UI
            document.getElementById('resultCard').classList.add('hidden');
            input.value = '';

            // Common Reset
            [btnYt, btnIg, btnTt].forEach(btn => {
                btn.classList.add('text-gray-500', 'border-transparent', 'opacity-60');
                btn.classList.remove('text-white', 'opacity-100');
                btn.style.boxShadow = 'none';
            });

            if (platform === 'yt') {
                // YOUTUBE THEME (RED)
                body.className = "theme-yt p-4 md:p-6 pb-20 transition-colors duration-700";
                input.placeholder = "Paste YouTube Link_Here //";
                
                logoSuffix.className = "text-transparent bg-clip-text bg-gradient-to-r from-neon-red to-red-600 drop-shadow-[0_0_15px_rgba(255,0,60,0.4)]";
                logoLine.className = "h-[2px] w-6 bg-neon-red/70 rounded-full transition-colors duration-500";
                statusPill.className = "inline-flex items-center gap-2 px-3 py-1 rounded-full border border-neon-red/30 bg-neon-red/5 backdrop-blur-md text-[10px] text-neon-red font-mono font-bold tracking-widest shadow-[0_0_15px_rgba(255,0,60,0.15)] transition-all duration-500";
                statusDotPing.className = "animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75 transition-colors duration-500";
                statusDot.className = "relative inline-flex rounded-full h-2 w-2 bg-neon-red transition-colors duration-500";
                heroGradient.className = "text-transparent bg-clip-text bg-gradient-to-r from-neon-red to-red-600 transition-all duration-700";
                
                generateBtn.className = "w-full h-14 btn-cyber btn-yt rounded-2xl font-bold uppercase tracking-[0.2em] flex items-center justify-center gap-3 text-sm text-white group transition-all duration-500";
                loaderLine.className = "absolute top-0 left-0 h-full w-1/2 bg-neon-red animate-[gridFlow_1s_linear_infinite]";

                btnYt.classList.remove('text-gray-500', 'border-transparent', 'opacity-60');
                btnYt.classList.add('text-white', 'border-neon-red', 'opacity-100', 'shadow-[0_10px_20px_-10px_rgba(255,0,60,0.5)]');

            } else if (platform === 'ig') {
                // INSTAGRAM THEME (PINK/ORANGE)
                body.className = "theme-ig p-4 md:p-6 pb-20 transition-colors duration-700";
                input.placeholder = "Paste Instagram Link_Here //";

                logoSuffix.className = "text-transparent bg-clip-text bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#FCB045] drop-shadow-[0_0_15px_rgba(214,41,118,0.4)]";
                logoLine.className = "h-[2px] w-6 bg-[#d62976]/70 rounded-full transition-colors duration-500";
                statusPill.className = "inline-flex items-center gap-2 px-3 py-1 rounded-full border border-[#d62976]/30 bg-[#d62976]/5 backdrop-blur-md text-[10px] text-[#d62976] font-mono font-bold tracking-widest shadow-[0_0_15px_rgba(214,41,118,0.15)] transition-all duration-500";
                statusDotPing.className = "animate-ping absolute inline-flex h-full w-full rounded-full bg-pink-400 opacity-75 transition-colors duration-500";
                statusDot.className = "relative inline-flex rounded-full h-2 w-2 bg-[#d62976] transition-colors duration-500";
                heroGradient.className = "text-transparent bg-clip-text bg-gradient-to-r from-[#833AB4] to-[#FD1D1D] transition-all duration-700";

                generateBtn.className = "w-full h-14 btn-cyber btn-ig rounded-2xl font-bold uppercase tracking-[0.2em] flex items-center justify-center gap-3 text-sm text-white group transition-all duration-500";
                loaderLine.className = "absolute top-0 left-0 h-full w-1/2 bg-gradient-to-r from-[#833AB4] to-[#FD1D1D] animate-[gridFlow_1s_linear_infinite]";

                btnIg.classList.remove('text-gray-500', 'border-transparent', 'opacity-60');
                btnIg.classList.add('text-white', 'border-[#d62976]', 'opacity-100', 'shadow-[0_10px_20px_-10px_rgba(214,41,118,0.5)]');
            } else {
                // TIKTOK THEME (CYAN/PINK/BLACK)
                body.className = "theme-tt p-4 md:p-6 pb-20 transition-colors duration-700";
                input.placeholder = "Paste TikTok Link_Here //";

                logoSuffix.className = "text-transparent bg-clip-text bg-gradient-to-r from-[#00f2ea] to-[#ff0050] drop-shadow-[0_0_15px_rgba(0,242,234,0.4)]";
                logoLine.className = "h-[2px] w-6 bg-[#00f2ea]/70 rounded-full transition-colors duration-500";
                statusPill.className = "inline-flex items-center gap-2 px-3 py-1 rounded-full border border-[#00f2ea]/30 bg-[#00f2ea]/5 backdrop-blur-md text-[10px] text-[#00f2ea] font-mono font-bold tracking-widest shadow-[0_0_15px_rgba(0,242,234,0.15)] transition-all duration-500";
                statusDotPing.className = "animate-ping absolute inline-flex h-full w-full rounded-full bg-cyan-400 opacity-75 transition-colors duration-500";
                statusDot.className = "relative inline-flex rounded-full h-2 w-2 bg-[#00f2ea] transition-colors duration-500";
                heroGradient.className = "text-transparent bg-clip-text bg-gradient-to-r from-[#00f2ea] to-[#ff0050] transition-all duration-700";

                generateBtn.className = "w-full h-14 btn-cyber btn-tt rounded-2xl font-bold uppercase tracking-[0.2em] flex items-center justify-center gap-3 text-sm text-white group transition-all duration-500";
                loaderLine.className = "absolute top-0 left-0 h-full w-1/2 bg-gradient-to-r from-[#00f2ea] to-[#ff0050] animate-[gridFlow_1s_linear_infinite]";

                btnTt.classList.remove('text-gray-500', 'border-transparent', 'opacity-60');
                btnTt.classList.add('text-white', 'border-[#00f2ea]', 'opacity-100', 'shadow-[0_10px_20px_-10px_rgba(0,242,234,0.5)]');
            }
        }

        async function pasteLink() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('urlInput').value = text;
            } catch (err) {
                alert("Please manually paste the link.");
            }
        }

        function extractYouTubeID(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        async function processLink() {
            const url = document.getElementById('urlInput').value.trim();
            if (!url) return;

            const loader = document.getElementById('loader');
            const resultCard = document.getElementById('resultCard');
            const btn = document.getElementById('generateBtn');
            const icon = btn.querySelector('i');
            
            loader.classList.remove('hidden');
            resultCard.classList.add('hidden');
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');
            icon.classList.remove('fa-bolt');
            icon.classList.add('fa-spinner', 'fa-spin');

            try {
                if (currentPlatform === 'yt') {
                    await handleYouTube(url);
                } else if (currentPlatform === 'ig') {
                    await handleInstagram(url);
                } else {
                    await handleTikTok(url);
                }
            } catch (error) {
                alert("Error: " + error.message);
            } finally {
                loader.classList.add('hidden');
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
                icon.classList.add('fa-bolt');
                icon.classList.remove('fa-spinner', 'fa-spin');
            }
        }

        async function handleYouTube(url) {
            const videoId = extractYouTubeID(url);
            if (!videoId) throw new Error("Invalid URL");
            const response = await fetch(`https://${YT_HOST}/v2/video/details?videoId=${videoId}`, {
                method: 'GET', headers: { 'x-rapidapi-key': RAPID_API_KEY, 'x-rapidapi-host': YT_HOST }
            });
            const data = await response.json();
            if (!data || !data.title) throw new Error("Failed");

            document.getElementById('thumb').src = data.thumbnails?.[data.thumbnails.length - 1]?.url;
            document.getElementById('videoTitle').innerText = data.title;
            document.getElementById('videoAuthor').innerHTML = `<i class="fa-regular fa-user"></i> ${data.channelName}`;
            document.getElementById('platformBadge').innerText = "YT";
            document.getElementById('platformBadge').className = "text-[9px] font-bold px-2 py-0.5 rounded bg-white/5 border border-white/10 text-gray-300 uppercase";

            const container = document.getElementById('downloadButtons');
            container.innerHTML = '';
            if (data.videos?.items) data.videos.items.forEach(item => { if (item.url) container.appendChild(createBtn(item.quality || 'Video', 'MP4', item.url)); });
            if (data.audios?.items) data.audios.items.forEach(item => { if (item.url) container.appendChild(createBtn(item.quality || 'Audio', 'MP3', item.url, true)); });

            resultCard.classList.remove('hidden');
        }

        async function handleInstagram(url) {
            const encodedUrl = encodeURIComponent(url);
            const response = await fetch(`https://${IG_HOST}/convert?url=${encodedUrl}`, {
                method: 'GET', headers: { 'x-rapidapi-key': RAPID_API_KEY, 'x-rapidapi-host': IG_HOST }
            });
            const data = await response.json();
            
            let downloadUrl = null;
            let thumbUrl = "https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=200";
            if (data.url && Array.isArray(data.url)) { downloadUrl = data.url[0].url; thumbUrl = data.thumb || thumbUrl; } 
            else if (data.url) { downloadUrl = data.url; } 
            else if (data.data?.url) { downloadUrl = data.data.url; } 
            else if (Array.isArray(data)) { downloadUrl = data[0]?.url; }

            if (!downloadUrl) throw new Error("Private/Invalid Link");
            document.getElementById('thumb').src = thumbUrl;
            document.getElementById('videoTitle').innerText = "Instagram Media";
            document.getElementById('videoAuthor').innerHTML = `<i class="fa-brands fa-instagram"></i> Instagram User`;
            document.getElementById('platformBadge').innerText = "IG";
            document.getElementById('platformBadge').className = "text-[9px] font-bold px-2 py-0.5 rounded bg-white/5 border border-pink-500/50 text-pink-500 uppercase";

            const container = document.getElementById('downloadButtons');
            container.innerHTML = '';
            container.appendChild(createBtn('Best Quality', 'MP4', downloadUrl));
            resultCard.classList.remove('hidden');
        }

        async function handleTikTok(url) {
            const encodedUrl = encodeURIComponent(url);
            const response = await fetch(`https://${TT_HOST}/?url=${encodedUrl}&hd=1`, {
                method: 'GET', headers: { 'x-rapidapi-key': RAPID_API_KEY, 'x-rapidapi-host': TT_HOST }
            });
            const data = await response.json();

            // Structure check for tiktok-video-no-watermark2
            let videoUrl = null;
            let coverUrl = "https://images.unsplash.com/photo-1628126235206-5260b9ea6441?w=200"; // default tiktok abstract
            let title = "TikTok Video";
            
            if (data.data) {
                videoUrl = data.data.play;
                coverUrl = data.data.cover || coverUrl;
                title = data.data.title || title;
            } else if (data.url) {
                 videoUrl = data.url; // Fallback
            }

            if (!videoUrl) throw new Error("Video not found or Private");

            document.getElementById('thumb').src = coverUrl;
            document.getElementById('videoTitle').innerText = title;
            document.getElementById('videoAuthor').innerHTML = `<i class="fa-brands fa-tiktok"></i> TikTok User`;
            document.getElementById('platformBadge').innerText = "TT";
            document.getElementById('platformBadge').className = "text-[9px] font-bold px-2 py-0.5 rounded bg-white/5 border border-cyan-400/50 text-cyan-400 uppercase";

            const container = document.getElementById('downloadButtons');
            container.innerHTML = '';
            container.appendChild(createBtn('No Watermark', 'HD MP4', videoUrl));
            
            if(data.data && data.data.music) {
                container.appendChild(createBtn('Audio Only', 'MP3', data.data.music, true));
            }

            resultCard.classList.remove('hidden');
        }


        function createBtn(quality, format, url, isAudio = false) {
            const btn = document.createElement('a');
            btn.href = url; btn.target = "_blank";
            const icon = isAudio ? 'fa-music' : 'fa-video';
            const colorClass = isAudio ? 'text-green-400 group-hover:text-green-300' : 'text-gray-300 group-hover:text-white';
            btn.className = "flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/5 text-xs group hover:bg-white/10 hover:border-white/20 transition-all duration-300";
            btn.innerHTML = `
                <div class="flex items-center gap-3"><i class="fa-solid ${icon} ${colorClass}"></i><span class="font-mono text-gray-300 font-bold">${quality}</span></div>
                <div class="flex items-center gap-2"><span class="text-[9px] bg-black px-1.5 py-0.5 rounded text-gray-500 font-bold tracking-wider border border-white/5">${format}</span><i class="fa-solid fa-arrow-down text-[10px] text-neon-red group-hover:translate-y-0.5 transition-transform"></i></div>
            `;
            return btn;
        }
    </script>
</body>
</html>
